<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>分享我的名片（LIFF｜自動分享）</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans TC',Arial,sans-serif;margin:0;background:#0b0f14;color:#e6e9ef;display:flex;align-items:center;justify-content:center;min-height:100vh}
    .wrap{max-width:560px;width:92%;text-align:center}
    .hint{color:#a3a3a3;font-size:13px;margin-top:12px}
    a{color:#93c5fd}
  </style>
</head>
<body>
  <div class="wrap">
    <div>正在開啟分享面板…</div>
    <div class="hint">若長時間沒有反應，請確認：1) 以<span style="white-space:nowrap">手機版 LINE</span>開啟 2) 此 LIFF 已啟用 Share Target Picker。</div>
  </div>

  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script>
  // === 請將 YOUR_LIFF_ID 改成你的 LIFF ID；或用網址參數 ?liffId=xxxx 帶入 ===
  const DEFAULT_LIFF_ID = "2007912782-KP2YNLap"; // 例如：2007912782-KP2YNLap

  // 你的 Flex 名片（四個 bubble）
  const flexCard = {
    "type": "flex",
    "altText": "涼涼冷氣 數位名片",
    "contents": {
      "type": "carousel",
      "contents": [
        {
          "type": "bubble",
          "hero": {
            "type": "image",
            "url": "https://lh3.googleusercontent.com/d/1zV4CCH_a7WRX_FervTvSgiU_hJyLrMOk",
            "size": "full",
            "aspectMode": "cover",
            "aspectRatio": "1:2",
            "action": { "type": "uri", "uri": "https://www.facebook.com/coooolAC/?locale=zh_TW" }
          }
        },
        {
          "type": "bubble",
          "hero": {
            "type": "image",
            "url": "https://lh3.googleusercontent.com/d/1ySRkmW0I_NiHDJRZSbS0ZMnHFxYa7c6Q",
            "size": "full",
            "aspectMode": "cover",
            "aspectRatio": "1:2",
            "action": { "type": "uri", "uri": "https://joshtsang916.github.io/personalwebsite/" }
          }
        },
        {
          "type": "bubble",
          "hero": {
            "type": "image",
            "url": "https://lh3.googleusercontent.com/d/1t2sC20wXhyvoodwtEE-DyihtAG8QworY",
            "size": "full",
            "aspectMode": "cover",
            "aspectRatio": "1:2",
            "action": { "type": "uri", "uri": "https://mycal.tw/booking/8e2f2eca-d96d-49a2-9621-2d910bc19b40/appointment" }
          }
        },
      ]
    }
  };

  function getParam(name){ const u=new URL(location.href); return u.searchParams.get(name); }

  (async () => {
    try {
      const liffId = getParam('liffId') || DEFAULT_LIFF_ID;
      await liff.init({ liffId, withLoginOnExternalBrowser: true });
      if (!liff.isLoggedIn()) { liff.login(); return; }
      if (!liff.isApiAvailable('shareTargetPicker')) {
        alert('請在手機版 LINE App 內開啟此頁再分享'); return;
      }
      await liff.shareTargetPicker([flexCard]);
      // 分享完成後自動關閉 LIFF 視窗
      liff.closeWindow();
    } catch (e) {
      console.error(e);
      alert('初始化或分享失敗：'+ (e?.message||e));
    }
  })();
  </script>
</body>
</html>
