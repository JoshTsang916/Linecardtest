<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>åˆ†äº«æˆ‘çš„åç‰‡ï¼ˆLIFFï¼‰</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans TC',Arial,sans-serif;margin:0;background:#0b0f14;color:#e6e9ef;display:flex;align-items:center;justify-content:center;min-height:100vh}
    .card{background:#111827;border:1px solid #1f2937;border-radius:16px;padding:20px;max-width:560px;width:92%;box-shadow:0 10px 30px rgba(0,0,0,.35)}
    h1{font-size:18px;margin:0 0 10px 0}
    .muted{color:#9ca3af;font-size:13px;margin-bottom:14px}
    button{appearance:none;border:0;background:#10b981;color:#fff;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer;width:100%}
    .row{display:flex;gap:10px;margin-top:10px}
    input{flex:1;border:1px solid #374151;border-radius:10px;background:#0b1220;color:#e6e9ef;padding:10px}
    a{color:#93c5fd}
  </style>
</head>
<body>
  <div class="card">
    <h1>åˆ†äº«æˆ‘çš„åç‰‡</h1>
    <div class="muted">åœ¨ LINE App å…§é–‹å•Ÿæœ¬é ï¼ŒæŒ‰ä¸‹æŒ‰éˆ•å³å¯æŠŠåç‰‡åˆ†äº«çµ¦å¥½å‹æˆ–ç¾¤çµ„ã€‚</div>
    <div class="row">
      <input id="liffIdInput" placeholder="è¼¸å…¥æˆ–ä½¿ç”¨ç¶²å€åƒæ•¸ ?liffId=..." />
      <button id="initBtn">åˆå§‹åŒ–</button>
    </div>
    <div class="row">
      <button id="shareBtn" disabled>åˆ†äº«åç‰‡</button>
    </div>
    <div class="muted" style="margin-top:12px">è‹¥çœ‹ä¸åˆ°åˆ†äº«é¸å–®ï¼Œè«‹ç¢ºèªï¼š1) ä»¥æ‰‹æ©Ÿç‰ˆ LINE é–‹å•Ÿ 2) LIFF è¨­å®šå·²å•Ÿç”¨ Share target pickerã€‚</div>
  </div>

  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script>
  // ä½ çš„ Flex åç‰‡ï¼ˆå¯ç›´æ¥åˆ†äº«ï¼‰
  const flexCard = {
    "type": "flex",
    "altText": "æ¶¼æ¶¼å†·æ°£ æ•¸ä½åç‰‡",
    "contents": {
      "type": "carousel",
      "contents": [
        {
          "type": "bubble",
          "hero": {
            "type": "image",
            "url": "https://lh3.googleusercontent.com/d/1C3OK_qhT_2OhJSyPH79eVMVaPuobnx55",
            "size": "full",
            "aspectMode": "cover",
            "aspectRatio": "1:2",
            "action": { "type": "uri", "uri": "https://www.facebook.com/coooolAC/?locale=zh_TW" }
          }
        },
        {
          "type": "bubble",
          "hero": {
            "type": "image",
            "url": "https://lh3.googleusercontent.com/d/13gzKe4gFPOtTwSMnoVhykIztPNMt-wcY",
            "size": "full",
            "aspectMode": "cover",
            "aspectRatio": "1:2",
            "action": { "type": "uri", "uri": "https://www.facebook.com/coooolAC/?locale=zh_TW" }
          }
        },
        {
          "type": "bubble",
          "hero": {
            "type": "image",
            "url": "https://lh3.googleusercontent.com/d/1rEk2rIWRA0w1WwxGX0gYTOK2YpAO-SKt",
            "size": "full",
            "aspectMode": "cover",
            "aspectRatio": "1:2",
            "action": { "type": "uri", "uri": "https://www.facebook.com/coooolAC/?locale=zh_TW" }
          }
        },
        {
          "type": "bubble",
          "hero": {
            "type": "image",
            "url": "https://lh3.googleusercontent.com/d/1I8bRo3Ap3iRpGoktXxc5HUxftUKtBVdq",
            "size": "full",
            "aspectMode": "cover",
            "aspectRatio": "1:1"
          },
          "body": {
            "type": "box",
            "layout": "vertical",
            "spacing": "md",
            "contents": [
              {
                "type": "box",
                "layout": "vertical",
                "backgroundColor": "#00000099",
                "cornerRadius": "md",
                "paddingAll": "10px",
                "contents": [
                  { "type": "text", "text": "æ¶¼æ¶¼å†·æ°£", "weight": "bold", "size": "xl", "color": "#FFFFFF" },
                  { "type": "text", "text": "å°ˆæ¥­å†·æ°£å®‰è£ã€ç¶­ä¿®ã€æ¸…æ½”", "size": "sm", "color": "#DDDDDD", "wrap": true }
                ]
              }
            ]
          },
          "footer": {
            "type": "box",
            "layout": "vertical",
            "spacing": "sm",
            "contents": [
              { "type": "button", "style": "primary", "height": "sm", "action": { "type": "uri", "label": "ğŸ“ æ’¥æ‰“é›»è©±", "uri": "tel:+886985009706" } },
              { "type": "button", "style": "secondary", "height": "sm", "action": { "type": "uri", "label": "ğŸ“ å°èˆª", "uri": "https://maps.app.goo.gl/fontpDoV6vnj45LK9" } },
              { "type": "button", "style": "secondary", "height": "sm", "action": { "type": "uri", "label": "ğŸŒ å®˜ç¶²/é ç´„", "uri": "https://www.facebook.com/coooolAC/?locale=zh_TW" } }
            ]
          }
        }
      ]
    }
  };

  function getParam(name){ const url = new URL(location.href); return url.searchParams.get(name); }

  async function initLiff(){
    const inParam = getParam('liffId');
    const liffId = inParam || document.getElementById('liffIdInput').value.trim();
    if (!liffId) { alert('è«‹è¼¸å…¥ LIFF IDï¼Œæˆ–åœ¨ç¶²å€å¾ŒåŠ  ?liffId=...'); return; }
    document.getElementById('liffIdInput').value = liffId;
    await liff.init({ liffId, withLoginOnExternalBrowser: true });
    if (!liff.isLoggedIn()) liff.login();
    document.getElementById('shareBtn').disabled = false;
  }

  document.getElementById('initBtn').addEventListener('click', initLiff);
  window.addEventListener('DOMContentLoaded', () => { if (getParam('liffId')) initLiff(); });

  document.getElementById('shareBtn').addEventListener('click', async () => {
    if (!liff.isLoggedIn()) await liff.login();
    if (!liff.isApiAvailable('shareTargetPicker')) { alert('è«‹åœ¨ LINE App å…§é–‹å•Ÿæ­¤é å†åˆ†äº«'); return; }
    await liff.shareTargetPicker([flexCard]);
  });
  </script>
</body>
</html>
